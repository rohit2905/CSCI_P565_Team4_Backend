<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Customer List</title>
  </head>
  <body>
    <h1>Customer List</h1>

    <!-- Search input field -->
    <input type="text" id="search-input" placeholder="Search by name" />
    <button onclick="searchCustomers()">Search</button>

    <ul id="customer-list"></ul>

    <script>
      // Function to search customers
      function searchCustomers() {
        const searchTerm = document.getElementById("search-input").value.trim();
        fetch(`/customers?search=${searchTerm}`)
          .then((response) => response.json())
          .then((data) => {
            const customerList = document.getElementById("customer-list");
            customerList.innerHTML = ""; // Clear existing list
            data.forEach((customer) => {
              const listItem = document.createElement("li");
              listItem.textContent = `Name: ${customer.name}, Email: ${customer.email}, Phone: ${customer.phone}, ID: ${customer.customerId}`;
              customerList.appendChild(listItem);
            });
          })
          .catch((error) => console.error("Error fetching data:", error));
      }

      // Initial load without search
      searchCustomers();
    </script>
  </body>
</html>
